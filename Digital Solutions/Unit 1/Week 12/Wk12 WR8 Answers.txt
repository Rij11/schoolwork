<?php

//Winner variable
$winner = "nobody";

//Array
$box = array("","","","","","","","","");

if (isset($_POST["submitbtn"])) {
    $box[0] = $_POST["box0"];
    $box[1] = $_POST["box1"];
    $box[2] = $_POST["box2"];
    $box[3] = $_POST["box3"];
    $box[4] = $_POST["box4"];
    $box[5] = $_POST["box5"];
    $box[6] = $_POST["box6"];
    $box[7] = $_POST["box7"];
    $box[8] = $_POST["box8"];

//All Possible combinations for winning
if (
    ($box[0] == "x" && $box[1] == "x" && $box[2] == "x") || 
    ($box[3] == "x" && $box[4] == "x" && $box[5] == "x") || 
    ($box[6] == "x" && $box[7] == "x" && $box[8] == "x") || 
    ($box[0] == "x" && $box[3] == "x" && $box[6] == "x") || 
    ($box[1] == "x" && $box[4] == "x" && $box[7] == "x") ||
    ($box[2] == "x" && $box[5] == "x" && $box[8] == "x") || 
    ($box[0] == "x" && $box[4] == "x" && $box[8] == "x") ||
    ($box[2] == "x" && $box[4] == "x" && $box[6] == "x")
    ) {
        $winner = "x";
        print("<h1 style='color:Green';>You Win!!</h1>");
    }
    
//Computer player code
//Looks for empty spaces
if ($winner == "nobody") {
    $blank = 0;
    for ($i=0; $i<=8; $i++) {
        if ($box[$i] == "") {
            $blank = 1;
        }
    }
    
//Computer places onto empty space
    if ($blank == 1) {
        $i = rand(0,8);
        while ($box[$i] != "") {
            $i = rand(0,8);
        }
    $box[$i] = "o";
    
//All Possible combinations for losing
    if (($box[0] == "o" && $box[1] == "o" && $box[2] == "o") || 
        ($box[3] == "o" && $box[4] == "o" && $box[5] == "o") || 
        ($box[6] == "o" && $box[7] == "o" && $box[8] == "o") || 
        ($box[0] == "o" && $box[3] == "o" && $box[6] == "o") || 
        ($box[1] == "o" && $box[4] == "o" && $box[7] == "o") || 
        ($box[2] == "o" && $box[5] == "o" && $box[8] == "o") || 
        ($box[0] == "o" && $box[4] == "o" && $box[8] == "o") ||
        ($box[2] == "o" && $box[4] == "o" && $box[6] == "o")) {
            $winner = "o";
            print("<h1 style='color:Red;'>Computer Wins!</h1>");
        }
        
//Else statement to delcare a tie
    } else {
        $winner = "tie";
        print("<h1>Tied Game!!</h1>");
    }
}
}
?>
<html>
    <head>
        <title>TicTacToe</title>
    <!--Style Sheet-->
    <style>
        h1 {
            font-size: 70px;
            font-family: "Lucida Console";
            text-align: center;
        }
        h2 {
            font-size: 60px;
            font-family: "Lucida Console";
            text-align: center;
        }
        body {
            font-size: 30px;
            font-family: "Lucida Console";
            margin-top: 50px;
            text-align: center;
            /* Optional Background (remove comment tags below) */
            /* background-image: url("https://t3.gstatic.com/licensed-image?q=tbn:ANd9GcQ5zONFK0zuZBywaPLArcsRCsb6k5JX9qeIarVbVRRsdLDzLiJRLOgC5qKMXeuA-r7BTGj2hp_CQ4D1Q8U"); */
        }
        .boxclass {
            width: 100px;
            height: 100px;
            font-size: 80px;
            text-align: center;
        }
        .buttonclass {
            width: 150px;
            height: 50px;
            font-size: 40px;
            text-align: center;
        }
        .buttonclassagain {
            width: 300px;
            height: 50px;
            font-size: 40px;
            text-align: center;
        }
    </style>
    </head>
    
    <body>
        <!--Heading-->
        <h2>TicTacToe</h2>
        
            
        <!--Creates form-->
        <form name="tictactoe" method="post" action="tictactoe.php">
        <?php
        for ($i=0; $i<=8; $i++) {
            print("<input class=\"boxclass\" type=\"text\" name=\"box$i\"value=\"$box[$i]\">");
            if (($i+1) % 3 == 0) {
                print("<br>");
            }
        }
        if ($winner == "nobody") {
            print("<input class=\"buttonclass\" type=\"reset\"name=\"resetbtn\"value=\"Reset\"onclick=\"window.location.href='tictactoe.php'\">");
            print("<input class=\"buttonclass\" type=\"submit\"name=\"submitbtn\" value=\"Go\">");
        } else {
            print("<input class=\"buttonclassagain\" type=\"button\"name=\"newgamebtn\"value=\"Play Again\"onclick=\"window.location.href='tictactoe.php'\">");
        }
        ?>
        </form>
    </body>
</html>

